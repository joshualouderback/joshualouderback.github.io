<!doctype html>
<!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if (IE 7)&!(IEMobile)]><html class="no-js lt-ie9 lt-ie8" lang="en"><![endif]-->
<!--[if (IE 8)&!(IEMobile)]><html class="no-js lt-ie9" lang="en"><![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"><!--<![endif]-->
<head>
<meta charset="utf-8">
<title>Action Properties (Part 5) &#8211; Joshua Louderback</title>
<meta name="description" content="The Journey To Action Properities">
<meta name="keywords" content="Unity, Action, Actions, Action Property, ActionProperty, Action Properties, ActionProperties, Programming, Tips">



<!-- Twitter Cards -->
<meta name="twitter:title" content="Action Properties (Part 5)">
<meta name="twitter:description" content="The Journey To Action Properities">
<meta name="twitter:site" content="@joshlouderback">
<meta name="twitter:creator" content="@joshlouderback">

<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="/images/default-thumb.png">

<!-- Open Graph -->
<meta property="og:locale" content="en_US">
<meta property="og:type" content="article">
<meta property="og:title" content="Action Properties (Part 5)">
<meta property="og:description" content="The Journey To Action Properities">
<meta property="og:url" content="/ActionProperties/">
<meta property="og:site_name" content="Joshua Louderback">

<meta property="og:image" content="/images/default-thumb.png">






<link rel="canonical" href="/ActionProperties/">
<link href="/feed.xml" type="application/atom+xml" rel="alternate" title="Joshua Louderback Feed">

<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- For all browsers -->
<link rel="stylesheet" href="/assets/css/main.css">

<meta http-equiv="cleartype" content="on">

<!-- HTML5 Shiv and Media Query Support -->
<!--[if lt IE 9]>
	<script src="/assets/js/vendor/html5shiv.min.js"></script>
	<script src="/assets/js/vendor/respond.min.js"></script>
<![endif]-->

<!-- Modernizr -->
<script src="/assets/js/vendor/modernizr-2.7.1.custom.min.js"></script>

<link href='//fonts.googleapis.com/css?family=PT+Sans+Narrow:400,700%7CPT+Serif:400,700,400italic' rel='stylesheet' type='text/css'>

<!-- Icons -->
<!-- 16x16 -->
<link rel="shortcut icon" href="/favicon.ico">
<!-- 32x32 -->
<link rel="shortcut icon" href="/favicon.png">
<!-- 57x57 (precomposed) for iPhone 3GS, pre-2011 iPod Touch and older Android devices -->
<link rel="apple-touch-icon-precomposed" href="/images/apple-touch-icon-precomposed.png">
<!-- 72x72 (precomposed) for 1st generation iPad, iPad 2 and iPad mini -->
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="/images/apple-touch-icon-72x72-precomposed.png">
<!-- 114x114 (precomposed) for iPhone 4, 4S, 5 and post-2011 iPod Touch -->
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="/images/apple-touch-icon-114x114-precomposed.png">
<!-- 144x144 (precomposed) for iPad 3rd and 4th generation -->
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="/images/apple-touch-icon-144x144-precomposed.png">

</head>

<body class="post">

<!--[if lt IE 9]><div class="browser-upgrade alert alert-info">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</div><![endif]-->

<div class="navigation-wrapper">
	<div class="site-name">
		<a href="/">Joshua Louderback</a>
	</div><!-- /.site-name -->
	<div class="top-navigation">
		<nav role="navigation" id="site-nav" class="nav">
		    <ul>
		        
				    
				        
				    
				    <li><a href="/projects/" >Projects</a></li>
				
				    
				        
				    
				    <li><a href="/posts/" >Blog</a></li>
				
				    
				        
				    
				    <li><a href="/resume/" >Resume</a></li>
				
		    </ul>
		</nav>
	</div><!-- /.top-navigation -->
</div><!-- /.navigation-wrapper -->



<div id="main" role="main">
  <div class="article-author-side">
    


<div itemscope itemtype="http://schema.org/Person">


	<img src="/images/bio-photo.jpg" class="bio-photo" alt="Joshua Louderback bio photo">


  <h3 itemprop="name">Joshua Louderback</h3>
  <p>Junior BSCS RTIS At DigiPen. Tools And Systems Programmer.</p>
  <a href="mailto:joshlouderback@gmail.com" class="author-social" target="_blank"><i class="fa fa-fw fa-envelope-square"></i> Email</a>
  <a href="http://twitter.com/joshlouderback" class="author-social" target="_blank"><i class="fa fa-fw fa-twitter-square"></i> Twitter</a>
  
  
  <a href="http://linkedin.com/in/joshualouderback" class="author-social" target="_blank"><i class="fa fa-fw fa-linkedin-square"></i> LinkedIn</a>
  
  
  
  <a href="http://github.com/joshualouderback" class="author-social" target="_blank"><i class="fa fa-fw fa-github"></i> Github</a>
  
  
  
  
  
  
  
  
  
  
  
</div>

  </div>
  <article class="post">
    <div class="headline-wrap">
      
        <h1><a href="/ActionProperties/" rel="bookmark" title="Action Properties (Part 5)">Action Properties (Part 5)</a></h1>
      
    </div><!--/ .headline-wrap -->
    <div class="article-wrap">
      <h3 id="what-are-action-properties">What Are Action Properties?</h3>

<p>Do you remember in the very first article when I talked about having an asteroid move from a to b? Well this is where ActionProperties come into play! You may be thinking since we already have Action Routines we can do that easily, so then why would we need another system for that? Well the simple answer is that we use interpolation a lot in game programming, so why not have a really nice system wrap it? Think about it, we interpolate color changes, positions of objects, rotations of objects, animations, lights and so much more! The name Action Property comes from the fact that we are manipulating a specific property of an object through an Action.</p>

<h3 id="the-struggle">The Struggle</h3>

<p>At the heart of Action Properties are two things:</p>

<ol>
  <li>Interpolation</li>
  <li>Property Of Object</li>
</ol>

<p>As simple as these two things are, they sure did make my life hard. In order to accomplish an Action Property, I needed to make an Action that can interpolate over a number of frames to any property given. Coming from C++, my instinctual reaction is to just make interpolate a generic function. But first let us just quickly look at the math behind interpolation, so you can fully understand the problem.</p>

<h4 id="interpolation">Interpolation:</h4>

<p>Interpolation is simply just obtaining a series of “points” in between two values. “Points” for example are: all the points along a line between (0,0) and (1,1), or colors values from red to blue. There are many more examples, but what all of these representations boil down to is a value between 0 (start value) and 1 (end value). Interpolation can be written in many different forms, but the one we are going to use is:</p>

<blockquote>

</blockquote>

<p><code> 
General Form:
Start + (End - Start) * t
</code></p>

<blockquote>

</blockquote>

<p>Now, in this equation, t is the value between 0 and 1. You can see if we plug in 0, we get just the start value and if we plugged in 1, we would be left with just the end value. To get any values in between start and end, we simply create a number between 0 and 1. There are plenty of different ways you can interpolate between two values and our ActionProperties will support that, but for now, we are just going to look at linear interpolation.</p>

<blockquote>

</blockquote>

<p><code>
Linear Interpolation:
t = currentTime / duration
</code></p>

<blockquote>

</blockquote>

<h4 id="back-to-it">Back To It:</h4>

<p>Since we got that out of the way, we can look at our problem. In order to interpolate a property it needs to be able to add, subtract and scale. In C++ we would just make this a generic function and the compiler will error if the user passes a type that doesn’t support the +, - and * operators. Well the problem is, C# doesn’t allow us to use operators on generics and there goes our simplest and most intuitive solution… well almost! When researching subtracting generic types, I found about constraints. Constraints restrict generics to specific types. Someone suggested building an interface that requires the implementation of Add, Subtract and Scale functions and restricting the generics in Action Properties to those. It basicaly gives us the same thing as C++, but rather than the type having to overload those operators they just need to fill out the interface.</p>

<blockquote>

</blockquote>

<p>Now that we have a new solution, I went about trying to implement it and not to my surprise I hit another roadblock. The problem is that in order to use an interface the class has to inherit from it, which means we can’t use any of the types in Unity (colors, vectors, matrices, and quaternions). So again, back to the drawing board. I mean I could of tried to wrap the classes, but that probably would of been ugly. I could of even rewritten all of them, but then you (reading this) would have to go do that as well. Both of those options did not sound very appealing to me, so yeah, back to the drawing board…</p>

<blockquote>

</blockquote>

<p>Then, I came across extension methods and thought maybe I could utilize them. Soon I came to realize these weren’t going to help either. Since I can’t constrain these classes to anything, at least to my knowledge, to ensure that these extension methods exist, I am out of luck. I even tried seeing if you could extend a class by an interface and that doesn’t even exist. Why doesn’t that exist (If you know you should let me know)? It would be such a nice feature! Once again stopped dead in my tracks and all I could say is why C#! Why?!!!!!!!</p>

<h4 id="finish-line">Finish Line:</h4>

<p>After trying so many other things that I can’t even remember, I came across another idea… What about template specialization? I could write a generic ActionProperty class and just specialize each of the types I want. When specializing, I could write functions to subtract, add and scale each of those types and it would solve all my problems. Well, guess what?! C# doesn’t have template specialization either! When trying to figure out how to do template specialization and finding out that it doesn’t exist, I came across one thing: “C# doesn’t want you to work with specialization except polymorphism”. That is when I finally hit the idea, what if I just write the base generic ActionProperty class and inherit a specialized type of that class. Like so:</p>

<div class="highlight"><pre><code class="language-c#" data-lang="c#"><span class="c1">// Here is the base generic class, marked as abstract because it needs specialization</span>
<span class="k">public</span> <span class="k">abstract</span> <span class="k">class</span> <span class="nc">ActionProperty</span><span class="p">&lt;</span><span class="n">T</span><span class="p">&gt;</span> <span class="p">:</span> <span class="n">Action</span> <span class="p">{</span> <span class="p">...</span> <span class="p">}</span>

<span class="c1">// Inheriting a specialized type of that class</span>
<span class="k">public</span> <span class="k">class</span> <span class="nc">ActionPropertyVec4</span> <span class="p">:</span> <span class="n">ActionProperty</span><span class="p">&lt;</span><span class="n">Vector4</span><span class="p">&gt;</span> <span class="p">{</span> <span class="p">...</span> <span class="p">}</span></code></pre></div>

<p>And wah lah! We got it! It works! Woo! And so, I thought I made it, but there still was one last problem… references. Ideally, with an ActionProperty, we would just love to pass in a reference to the value we want to modify and store it. You might be wondering, how did you have a problem with references? Yeah, it was a surprise to me too. Apparently, Unity does not allow you to pass references to the internals of their types. The prime example is moving that object from a to b, because all we need is the position of the object. Ideally, we would just pass a reference to the objects position (gameObjects.transform.position), but Unity does not allow that. There were two approaches I saw from here. The first, is to just take in the reference to the transform and build support of knowing what internal I should grab in the transform. For example, letting the user pass in an enumeration value that I defer to, in order to select the correct internal. The second, was building a callback function that allows the user to define how they want to set their values. I went with the second approach, because I felt like it would be more extendable to the user.</p>

<h3 id="base-class">Base Class:</h3>

<p>Here it is, in all its glory! I would of loved to make this not as redudant, so if anyone comes across any better solutions, let me know. I would love to hear them!</p>

<div class="highlight"><pre><code class="language-c#" data-lang="c#"><span class="k">public</span> <span class="k">abstract</span> <span class="k">class</span> <span class="nc">ActionProperty</span><span class="p">&lt;</span><span class="n">T</span><span class="p">&gt;</span> <span class="p">:</span> <span class="n">Action</span>
<span class="p">{</span>
  <span class="c1">// Format of our settor delegate</span>
  <span class="k">public</span> <span class="k">delegate</span> <span class="k">void</span> <span class="nf">Settor</span><span class="p">(</span><span class="n">T</span> <span class="n">newValue</span><span class="p">);</span>    
  <span class="c1">// Reference to the ease function for type of interpolation</span>
  <span class="k">protected</span> <span class="n">EasesAndCurves</span><span class="p">.</span><span class="n">EaseFunction</span> <span class="n">easeFunction_</span><span class="p">;</span>  
  <span class="k">protected</span> <span class="kt">float</span> <span class="n">duration_</span><span class="p">;</span>    <span class="c1">// How long the user wants to interpolate over</span>
  <span class="k">protected</span> <span class="n">T</span> <span class="n">startValue_</span><span class="p">;</span>      <span class="c1">// The start value</span>
  <span class="k">protected</span> <span class="n">T</span> <span class="n">change_</span><span class="p">;</span>          <span class="c1">// The change we interpolate with</span>
  <span class="k">protected</span> <span class="n">Settor</span> <span class="n">settor_</span><span class="p">;</span>     <span class="c1">// Reference to the settor to call</span>
  
  <span class="c1">// Our abstract functions that need to be overrided to support generic update code</span>
  <span class="k">public</span> <span class="k">abstract</span> <span class="n">T</span> <span class="nf">Add</span><span class="p">(</span><span class="n">T</span> <span class="n">interpolated</span><span class="p">,</span> <span class="n">T</span> <span class="n">start</span><span class="p">);</span>
  <span class="k">public</span> <span class="k">abstract</span> <span class="n">T</span> <span class="nf">Scale</span><span class="p">(</span><span class="kt">float</span> <span class="n">scalar</span><span class="p">,</span> <span class="n">T</span> <span class="n">difference</span><span class="p">);</span>

  <span class="c1">// Since all properties update the same, why make users override this function in each</span>
  <span class="c1">// implementation when they will just be copying and pasting code</span>
  <span class="k">public</span> <span class="k">override</span> <span class="n">IEnumerator</span> <span class="nf">Update</span> <span class="p">()</span>
  <span class="p">{</span>
    <span class="c1">// Set the current time to duration and set as running</span>
    <span class="kt">float</span> <span class="n">currentTime</span> <span class="p">=</span> <span class="m">0</span><span class="p">;</span>
    <span class="n">running_</span> <span class="p">=</span> <span class="k">true</span><span class="p">;</span>

    <span class="c1">// While we have time, update once per frame</span>
    <span class="k">while</span><span class="p">(</span><span class="n">currentTime</span> <span class="p">&lt;</span> <span class="n">duration_</span><span class="p">)</span>
    <span class="p">{</span>
      <span class="c1">// If not paused, update</span>
      <span class="k">if</span><span class="p">(!</span><span class="n">IsPaused</span><span class="p">())</span>
      <span class="p">{</span>
        <span class="c1">// Calculate the ease interpolation factor</span>
        <span class="kt">var</span> <span class="n">easeFactor</span> <span class="p">=</span> <span class="n">easeFunction_</span><span class="p">(</span><span class="n">currentTime</span><span class="p">,</span> <span class="n">duration_</span><span class="p">);</span>

        <span class="c1">// Interpolate with ease factor and use callback to set it</span>
        <span class="n">settor_</span><span class="p">(</span><span class="n">Add</span><span class="p">(</span><span class="n">Scale</span><span class="p">(</span><span class="n">easeFactor</span><span class="p">,</span> <span class="n">change_</span><span class="p">),</span> <span class="n">startValue_</span><span class="p">));</span> 

        <span class="c1">// Update frame time, yield till next frame</span>
        <span class="n">currentTime</span> <span class="p">+=</span> <span class="n">Time</span><span class="p">.</span><span class="n">deltaTime</span><span class="p">;</span>
      <span class="p">}</span>
      <span class="k">yield</span> <span class="k">return</span> <span class="k">null</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="c1">// Set the position as exactly the last position, just in case of floating point error</span>
    <span class="n">settor_</span><span class="p">(</span><span class="n">Add</span><span class="p">(</span><span class="n">change_</span><span class="p">,</span> <span class="n">startValue_</span><span class="p">));</span>
    <span class="c1">// Mark as completed, then break yielding</span>
    <span class="n">completed_</span> <span class="p">=</span> <span class="k">true</span><span class="p">;</span>
    <span class="k">yield</span> <span class="k">break</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span></code></pre></div>

<h3 id="extension-example">Extension Example:</h3>

<p>Here is an example of one of the ActionProperty extension classes. To make any other one it is just copy and paste, then just change the types. The only work you may have to do is subtraction, addition and scaling if your class doesn’t already support those operators.</p>

<div class="highlight"><pre><code class="language-c#" data-lang="c#"><span class="k">public</span> <span class="k">class</span> <span class="nc">ActionPropertyVec4</span> <span class="p">:</span> <span class="n">ActionProperty</span><span class="p">&lt;</span><span class="n">Vector4</span><span class="p">&gt;</span>
<span class="p">{</span>
  <span class="k">public</span> <span class="nf">ActionPropertyVec4</span><span class="p">(</span><span class="n">ActionManager</span> <span class="n">manager</span><span class="p">,</span> <span class="n">Vector4</span> <span class="n">startValue</span><span class="p">,</span> <span class="n">Vector4</span> <span class="n">endValue</span><span class="p">,</span> 
                            <span class="kt">float</span> <span class="n">duration</span><span class="p">,</span> <span class="n">EasesAndCurves</span><span class="p">.</span><span class="n">Eases</span> <span class="n">ease</span><span class="p">,</span> <span class="n">Settor</span> <span class="n">settor</span><span class="p">)</span>
  <span class="p">{</span>
    <span class="c1">// Set the starting value</span>
    <span class="n">startValue_</span> <span class="p">=</span> <span class="n">startValue</span><span class="p">;</span>
    <span class="c1">// Since the change never changes... we can calculate it once rather than every frame</span>
    <span class="n">change_</span> <span class="p">=</span> <span class="n">endValue</span> <span class="p">-</span> <span class="n">startValue</span><span class="p">;</span>
    <span class="c1">// Set the duration of the interpolation</span>
    <span class="n">duration_</span> <span class="p">=</span> <span class="n">duration</span><span class="p">;</span>
    <span class="c1">// Set the reference to the settor</span>
    <span class="n">settor_</span> <span class="p">=</span> <span class="n">settor</span><span class="p">;</span>
    <span class="c1">// Grab the ease function from our ease class</span>
    <span class="n">easeFunction_</span> <span class="p">=</span> <span class="k">new</span> <span class="n">EasesAndCurves</span><span class="p">().</span><span class="n">GetEase</span><span class="p">(</span><span class="n">ease</span><span class="p">);</span>
    <span class="c1">// Set our parent and add ourselves to them</span>
    <span class="n">SetParent</span><span class="p">(</span><span class="n">manager</span><span class="p">);</span>
    <span class="n">AddAction</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
  <span class="p">}</span>

  <span class="c1">// Override two simple functions, rather than copy paste code</span>
  <span class="k">public</span> <span class="k">override</span> <span class="n">Vector4</span> <span class="nf">Add</span><span class="p">(</span><span class="n">Vector4</span> <span class="n">interpolated</span><span class="p">,</span> <span class="n">Vector4</span> <span class="n">start</span><span class="p">)</span>
  <span class="p">{</span>
    <span class="k">return</span> <span class="n">interpolated</span> <span class="p">+</span> <span class="n">start</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="k">public</span> <span class="k">override</span> <span class="n">Vector4</span> <span class="nf">Scale</span><span class="p">(</span><span class="kt">float</span> <span class="n">scalar</span><span class="p">,</span> <span class="n">Vector4</span> <span class="n">difference</span><span class="p">)</span>
  <span class="p">{</span>
    <span class="k">return</span> <span class="n">scalar</span> <span class="p">*</span> <span class="n">difference</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span></code></pre></div>

<h3 id="ease-class">Ease Class:</h3>

<p>My ease class is much larger than the one below, but I don’t want to balloon this article too much.</p>

<div class="highlight"><pre><code class="language-c#" data-lang="c#"><span class="k">public</span> <span class="k">class</span> <span class="nc">EasesAndCurves</span> 
<span class="p">{</span>
  <span class="c1">//All the various ease types.</span>
  <span class="k">public</span> <span class="k">enum</span> <span class="n">Eases</span>
  <span class="p">{</span>
    <span class="n">Linear</span><span class="p">,</span>
    <span class="n">QuadIn</span><span class="p">,</span>
    <span class="n">QuadInOut</span><span class="p">,</span>
    <span class="n">QuadOut</span><span class="p">,</span>
    <span class="c1">// ... much more ease types</span>
  <span class="p">};</span>

  <span class="k">public</span> <span class="k">delegate</span> <span class="kt">float</span> <span class="nf">EaseFunction</span><span class="p">(</span><span class="kt">float</span> <span class="n">currentTime</span><span class="p">,</span> <span class="kt">float</span> <span class="n">duration</span><span class="p">);</span>

  <span class="k">public</span> <span class="n">EaseFunction</span> <span class="nf">GetEase</span><span class="p">(</span><span class="n">Eases</span> <span class="n">easeType</span><span class="p">)</span>
  <span class="p">{</span>
    <span class="c1">// Grab the function for caculating the ease</span>
    <span class="k">switch</span><span class="p">(</span><span class="n">easeType</span><span class="p">)</span>
    <span class="p">{</span>
    <span class="k">case</span> <span class="n">Eases</span><span class="p">.</span><span class="n">Linear</span><span class="p">:</span>
      <span class="k">return</span> <span class="n">Linear</span><span class="p">;</span>
    <span class="k">case</span> <span class="n">Eases</span><span class="p">.</span><span class="n">QuadIn</span><span class="p">:</span>
      <span class="k">return</span> <span class="n">QuadIn</span><span class="p">;</span>
    <span class="k">case</span> <span class="n">Eases</span><span class="p">.</span><span class="n">QuadInOut</span><span class="p">:</span>
      <span class="k">return</span> <span class="n">QuadInOut</span><span class="p">;</span>
    <span class="k">case</span> <span class="n">Eases</span><span class="p">.</span><span class="n">QuadOut</span><span class="p">:</span>
      <span class="k">return</span> <span class="n">QuadOut</span><span class="p">;</span>

    <span class="c1">// ... so many other types</span>

    <span class="k">default</span><span class="p">:</span>
    <span class="k">return</span> <span class="n">Linear</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">}</span>

  <span class="k">public</span> <span class="kt">float</span> <span class="nf">Linear</span><span class="p">(</span><span class="kt">float</span> <span class="n">currentTime</span><span class="p">,</span> <span class="kt">float</span> <span class="n">duration</span><span class="p">)</span>
  <span class="p">{</span>
    <span class="k">return</span> <span class="n">currentTime</span> <span class="p">/</span> <span class="n">duration</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="k">public</span> <span class="kt">float</span> <span class="nf">QuadIn</span><span class="p">(</span><span class="kt">float</span> <span class="n">currentTime</span><span class="p">,</span> <span class="kt">float</span> <span class="n">duration</span><span class="p">)</span>
  <span class="p">{</span>
    <span class="n">currentTime</span> <span class="p">/=</span> <span class="n">duration</span><span class="p">;</span>

    <span class="k">return</span> <span class="n">currentTime</span> <span class="p">*</span> <span class="n">currentTime</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="k">public</span> <span class="kt">float</span> <span class="nf">QuadOut</span><span class="p">(</span><span class="kt">float</span> <span class="n">currentTime</span><span class="p">,</span> <span class="kt">float</span> <span class="n">duration</span><span class="p">)</span>
  <span class="p">{</span>
    <span class="n">currentTime</span> <span class="p">/=</span> <span class="n">duration</span><span class="p">;</span>
    <span class="k">return</span> <span class="p">-</span><span class="m">1</span> <span class="p">*</span> <span class="n">currentTime</span> <span class="p">*</span> <span class="p">(</span><span class="n">currentTime</span> <span class="p">-</span> <span class="m">2</span><span class="p">);</span>
  <span class="p">}</span>

  <span class="k">public</span> <span class="kt">float</span> <span class="nf">QuadInOut</span><span class="p">(</span><span class="kt">float</span> <span class="n">currentTime</span><span class="p">,</span> <span class="kt">float</span> <span class="n">duration</span><span class="p">)</span>
  <span class="p">{</span>
    <span class="n">currentTime</span> <span class="p">/=</span> <span class="n">duration</span> <span class="p">/</span> <span class="m">2</span><span class="p">;</span>

    <span class="k">if</span> <span class="p">(</span><span class="n">currentTime</span> <span class="p">&lt;</span> <span class="m">1</span><span class="p">)</span>
    <span class="p">{</span>
      <span class="k">return</span> <span class="p">(</span><span class="m">0.5f</span> <span class="p">*</span> <span class="n">currentTime</span> <span class="p">*</span> <span class="n">currentTime</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="n">currentTime</span> <span class="p">-=</span> <span class="m">1</span><span class="p">;</span>
    <span class="k">return</span> <span class="p">-</span><span class="m">0.5f</span> <span class="p">*</span> <span class="p">(</span><span class="n">currentTime</span> <span class="p">*</span> <span class="p">(</span><span class="n">currentTime</span> <span class="p">-</span> <span class="m">2</span><span class="p">)</span> <span class="p">-</span> <span class="m">1</span><span class="p">);</span>
  <span class="p">}</span>

  <span class="c1">// ... again ease functions here</span>
<span class="p">}</span></code></pre></div>

<h3 id="sample">Sample:</h3>

<p>Once I get the time, I will put up a full project on github with the ActionSystem and the example I stated at the beginning of the article. For now, here is a little sample, so you can see general syntax of using it.</p>

<div class="highlight"><pre><code class="language-c#" data-lang="c#"><span class="k">public</span> <span class="k">class</span> <span class="nc">ActionTest</span> <span class="p">:</span> <span class="n">MonoBehaviour</span> <span class="p">{</span>
  <span class="c1">// Store seq, so we can pause it later</span>
  <span class="n">ActionSequence</span> <span class="n">seq</span><span class="p">;</span>

  <span class="c1">// Callback for settors</span>
  <span class="k">void</span> <span class="nf">SetPosition</span><span class="p">(</span><span class="n">Vector3</span> <span class="k">set</span><span class="p">)</span> <span class="p">{</span> <span class="k">this</span><span class="p">.</span><span class="n">transform</span><span class="p">.</span><span class="n">position</span> <span class="p">=</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>
  <span class="k">void</span> <span class="nf">SetColor</span><span class="p">(</span><span class="n">Color</span> <span class="k">set</span><span class="p">)</span> <span class="p">{</span> <span class="n">mat</span><span class="p">.</span><span class="n">color</span> <span class="p">=</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>

  <span class="c1">// We want to create action in start, because we don&#39;t want to create this every frame</span>
  <span class="c1">// Example of general setup of Actions</span>
  <span class="k">void</span> <span class="nf">Start</span> <span class="p">()</span> <span class="p">{</span>
    <span class="c1">// Get material and set it to blue, not checking for null but should</span>
    <span class="n">mat</span> <span class="p">=</span> <span class="k">this</span><span class="p">.</span><span class="n">gameObject</span><span class="p">.</span><span class="n">GetComponent</span><span class="p">&lt;</span><span class="n">MeshRenderer</span><span class="p">&gt;().</span><span class="n">material</span><span class="p">;</span>
    <span class="n">mat</span><span class="p">.</span><span class="n">color</span> <span class="p">=</span> <span class="n">Color</span><span class="p">.</span><span class="n">blue</span><span class="p">;</span>
    <span class="c1">// Create the sequence and store it, so we can add to it</span>
    <span class="n">seq</span> <span class="p">=</span> <span class="k">new</span> <span class="n">ActionSequence</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="n">gameObject</span><span class="p">);</span>
    <span class="c1">// Create group and store it, so we can add to it</span>
    <span class="n">ActionGroup</span> <span class="n">grp</span> <span class="p">=</span> <span class="k">new</span> <span class="n">ActionGroup</span><span class="p">(</span><span class="n">seq</span><span class="p">);</span>
    <span class="c1">// Move object up while changing its color</span>
    <span class="k">new</span> <span class="nf">ActionPropertyVec3</span><span class="p">(</span><span class="n">grp</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="n">transform</span><span class="p">.</span><span class="n">position</span><span class="p">,</span> 
                           <span class="k">this</span><span class="p">.</span><span class="n">transform</span><span class="p">.</span><span class="n">position</span> <span class="p">+</span> <span class="k">new</span> <span class="n">Vector3</span><span class="p">(</span><span class="m">0</span><span class="p">,</span> <span class="m">10</span><span class="p">,</span> <span class="m">0</span><span class="p">),</span> <span class="m">2.0f</span><span class="p">,</span>
                           <span class="n">EasesAndCurves</span><span class="p">.</span><span class="n">Eases</span><span class="p">.</span><span class="n">Linear</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="n">SetPosition</span><span class="p">);</span>
    <span class="k">new</span> <span class="nf">ActionPropertyColor</span><span class="p">(</span><span class="n">grp</span><span class="p">,</span> <span class="n">mat</span><span class="p">.</span><span class="n">color</span><span class="p">,</span> <span class="n">Color</span><span class="p">.</span><span class="n">red</span><span class="p">,</span> <span class="m">2.0f</span><span class="p">,</span> 
                            <span class="n">EasesAndCurves</span><span class="p">.</span><span class="n">Eases</span><span class="p">.</span><span class="n">Linear</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="n">SetColor</span><span class="p">);</span>
  <span class="p">}</span>
  
  <span class="c1">// Example of pausing and cancelling</span>
  <span class="k">void</span> <span class="nf">Update</span> <span class="p">()</span> <span class="p">{</span>
    <span class="c1">// If press space we pause or resume it</span>
    <span class="k">if</span><span class="p">(</span><span class="n">Input</span><span class="p">.</span><span class="n">GetKeyDown</span><span class="p">(</span><span class="n">KeyCode</span><span class="p">.</span><span class="n">Space</span><span class="p">))</span> 
    <span class="p">{</span>
      <span class="k">if</span><span class="p">(</span><span class="n">seq</span><span class="p">.</span><span class="n">IsPaused</span><span class="p">())</span>
        <span class="n">seq</span><span class="p">.</span><span class="n">Resume</span><span class="p">();</span>
      <span class="k">else</span>
        <span class="n">seq</span><span class="p">.</span><span class="n">Pause</span><span class="p">();</span>
    <span class="p">}</span>
    <span class="c1">// Otherwise if press e, cancel entire action</span>
    <span class="k">else</span> <span class="nf">if</span><span class="p">(</span><span class="n">Input</span><span class="p">.</span><span class="n">GetKeyDown</span><span class="p">(</span><span class="n">KeyCode</span><span class="p">.</span><span class="n">E</span><span class="p">))</span>
    <span class="p">{</span>
      <span class="n">seq</span><span class="p">.</span><span class="n">Cancel</span><span class="p">();</span>
    <span class="p">}</span>
<span class="p">}</span></code></pre></div>

<h3 id="conclusion">Conclusion:</h3>

<p>Writing this Action system was really fun and helped expand my knowledge of C# even further. I highly recommend implementing an Action system in your engine, because developing content is faster and less error prone. It is really simple to use and to teach. Getting any new members up to speed with this system will take no time at all! Writing this article actually helped me find bugs in the system and build an even deeper understanding of C#. So I highly recommend spending some time writing about your own work, if you don’t do so already. It was a great learning experience. Also during the process of writing this article I wanted to be as full disclosure as possible, so that you come out with a very strong foundation to look back to. If you come across any unclarity, let me know so I can update the article (if needed) or answer your questions. Since this is such a great tool, I don’t mind if people just grab it and go. All I ask is for you credit me and my work. If you find any bugs, or new solutions let me know! I am always striving to improve the system and my understanding. Lastly, send me the cool stuff you do with this! I’d love to see how you use it and hope to learn techniques I haven’t even thought of.</p>


      <hr />
      <footer role="contentinfo">
        <div class="social-share">
  <h4>Share on</h4>
  <ul>
    <li>
      <a href="https://twitter.com/intent/tweet?text=/ActionProperties/" class="twitter" title="Share on Twitter"><i class="fa fa-twitter"></i><span> Twitter</span></a>
    </li>
    <li>
      <a href="https://www.facebook.com/sharer/sharer.php?u=/ActionProperties/" class="facebook" title="Share on Facebook"><i class="fa fa-facebook"></i><span> Facebook</span></a>
    </li>
    <li>
      <a href="https://plus.google.com/share?url=/ActionProperties/" class="google-plus" title="Share on Google Plus"><i class="fa fa-google-plus"></i><span> Google+</span></a>
    </li>
  </ul>
</div><!-- /.social-share -->
        <p class="byline"><strong>Action Properties (Part 5)</strong> was published on <time datetime="2016-01-25T00:00:00-08:00">January 25, 2016</time> and last modified on <time datetime="2016-01-30">January 30, 2016</time>.</p>
      </footer>
    </div><!-- /.article-wrap -->
  
  </article>
</div><!-- /#main -->

<div class="footer-wrap">
  
  <div class="related-articles">
  <h4>You might also enjoy <small class="pull-right">(<a href="/posts/">View all posts</a>)</small></h4>
    <ul>
    
      <li><a href="/ActionFoundation/" title="Action Foundations (Part 1)">Action Foundations (Part 1)</a></li>
    
      <li><a href="/ActionManagement/" title="Action Management (Part 2)">Action Management (Part 2)</a></li>
    
      <li><a href="/AddingActions/" title="Adding Actions (Part 2.5)">Adding Actions (Part 2.5)</a></li>
    
    </ul>
    <hr />
  </div><!-- /.related-articles -->
  
  <footer>
    

<span>&copy; 2016 Joshua Louderback. Powered by <a href="http://jekyllrb.com" rel="nofollow">Jekyll</a> using the <a href="https://mademistakes.com/work/minimal-mistakes-jekyll-theme/" rel="nofollow">Minimal Mistakes</a> theme.</span>

  </footer>
</div><!-- /.footer-wrap -->

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="/assets/js/vendor/jquery-1.9.1.min.js"><\/script>')</script>
<script src="/assets/js/scripts.min.js"></script>

<!-- Asynchronous Google Analytics snippet -->
<script>
  var _gaq = _gaq || [];
  var pluginUrl =
 '//www.google-analytics.com/plugins/ga/inpage_linkid.js';
  _gaq.push(['_require', 'inpage_linkid', pluginUrl]);
  _gaq.push(['_setAccount', 'UA-74044890-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>


  




</body>
</html>
